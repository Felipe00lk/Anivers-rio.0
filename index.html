
<script>
  // Mostrar idade e mensagem
  const age = 16;
  document.getElementById('age-text').textContent = age;
  const msg = document.getElementById('message-text');
  msg.textContent = `Hoje vocÃª completa ${age} anos â€” que essa fase seja cheia de descobertas, risos e amizades verdadeiras. Aproveite seu dia ao mÃ¡ximo!`;

  // Nome personalizado
  const nameInp = document.getElementById('name-inp');
  const applyBtn = document.getElementById('apply-name');
  const friendNameEl = document.getElementById('friend-name');
  applyBtn.addEventListener('click', ()=>{
    const v = nameInp.value.trim();
    if(v) friendNameEl.textContent = v;
  });

  // ====== ðŸŽµ MÃšSICA â€œPARABÃ‰NS PRA VOCÃŠâ€ ======
  const playBtn = document.getElementById('play-btn');
  let audioCtx = null;

  // Notas da melodia (frequÃªncias em Hz)
  const notes = [
    264, 264, 297, 264, 352, 330, // ParabÃ©ns pra vocÃª
    264, 264, 297, 264, 396, 352, // Nesta data querida
    264, 264, 528, 440, 352, 330, 297, // Muitas felicidades
    466, 466, 440, 352, 396, 352 // Muitos anos de vida
  ];

  playBtn.addEventListener('click', async () => {
    if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();

    let time = audioCtx.currentTime;
    notes.forEach((freq, i) => {
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.type = 'sine';
      osc.frequency.setValueAtTime(freq, time);
      gain.gain.setValueAtTime(0.15, time);
      gain.gain.exponentialRampToValueAtTime(0.001, time + 0.4);
      osc.connect(gain);
      gain.connect(audioCtx.destination);
      osc.start(time);
      osc.stop(time + 0.4);
      time += 0.45;
    });
  });

  // ====== ðŸŽ‰ CONFETTI ======
  const canvas = document.getElementById('confetti');
  const ctx = canvas.getContext('2d');
  let W = canvas.width = canvas.clientWidth;
  let H = canvas.height = canvas.clientHeight;
  window.addEventListener('resize', ()=>{ W = canvas.width = canvas.clientWidth; H = canvas.height = canvas.clientHeight; });

  function rand(min,max){return Math.random()*(max-min)+min}
  let particles = [];
  function makeParticle(x,y){
    return {
      x:x||rand(20,W-20), y:y||-10,
      vx:rand(-2,2), vy:rand(2,6),
      size:rand(6,12), rot:rand(0,Math.PI*2), vr:rand(-0.15,0.15),
      color: ['#ff6b6b','#ffd166','#6bf5c6','#8ea0ff'][Math.floor(Math.random()*4)],
      life:0, ttl: rand(90,160)
    }
  }

  function launchConfetti(count=120){
    for(let i=0;i<count;i++) particles.push(makeParticle());
    if(!animating) animate();
  }

  const confettiBtn = document.getElementById('confetti-btn');
  confettiBtn.addEventListener('click', ()=>{ launchConfetti(140); });

  let animating = false;
  function animate(){ animating = true; ctx.clearRect(0,0,W,H);
    for(let i=particles.length-1;i>=0;i--){
      const p = particles[i];
      p.x += p.vx; p.y += p.vy; p.vy += 0.06; p.rot += p.vr; p.life++;
      ctx.save();
      ctx.translate(p.x,p.y); ctx.rotate(p.rot);
      ctx.fillStyle = p.color;
      ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size*0.6);
      ctx.restore();
      if(p.y>H+30 || p.life>p.ttl) particles.splice(i,1);
    }
    if(particles.length>0) requestAnimationFrame(animate); else animating=false;
  }
</script>
